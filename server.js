const express = require('express');
const cors = require('cors');
const path = require('path');

const app = express();
const PORT = 3000;

// Middleware
app.use(cors());
app.use(express.json());
app.use(express.static('.'));

// ìŠ¹ì¸í–‰ì •ì‚¬ ê´€ë ¨ ì£¼ì œ ë°ì´í„°
const topics = [
  {
    id: 1,
    title: "ê±´ì„¤ì—… ì¸í—ˆê°€ ì ˆì°¨ ì™„ë²½ ê°€ì´ë“œ",
    description: "ê±´ì„¤ì—… ë“±ë¡ë¶€í„° ë³€ê²½ì‹ ê³ ê¹Œì§€ í•„ìš”í•œ ëª¨ë“  ì„œë¥˜ì™€ ì ˆì°¨",
    category: "ê±´ì„¤ì—…"
  },
  {
    id: 2,
    title: "ì‹í’ˆìœ„ìƒë²• ì˜ì—…ì‹ ê³  ì²´í¬ë¦¬ìŠ¤íŠ¸",
    description: "ìŒì‹ì , ì¹´í˜ ì°½ì—… ì‹œ ë°˜ë“œì‹œ ì•Œì•„ì•¼ í•  ìœ„ìƒ í—ˆê°€ ì ˆì°¨",
    category: "ì‹í’ˆìœ„ìƒ"
  },
  {
    id: 3,
    title: "ì™¸êµ­ì¸ ì²´ë¥˜ìê²© ë³€ê²½ ì‹ ì²­ ë°©ë²•",
    description: "ë¹„ì ë³€ê²½ë¶€í„° ì„œë¥˜ ì¤€ë¹„ê¹Œì§€ ìƒì„¸ ì•ˆë‚´",
    category: "ì¶œì…êµ­"
  },
  {
    id: 4,
    title: "ê°œì¸ì •ë³´ë³´í˜¸ë²• ì¤€ìˆ˜ ê°€ì´ë“œ",
    description: "ì‚¬ì—…ì¥ì—ì„œ ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•  ê°œì¸ì •ë³´ ê´€ë¦¬ ë°©ë²•",
    category: "ë²•ë¥ "
  },
  {
    id: 5,
    title: "ê±´ì¶•ë¬¼ ìš©ë„ë³€ê²½ í—ˆê°€ ì ˆì°¨",
    description: "ìƒê°€, ì£¼íƒ ìš©ë„ë³€ê²½ ì‹œ í•„ìš”í•œ ì„œë¥˜ì™€ ì£¼ì˜ì‚¬í•­",
    category: "ê±´ì¶•"
  },
  {
    id: 6,
    title: "í†µì‹ íŒë§¤ì—… ì‹ ê³  ì™„ë²½ ì •ë¦¬",
    description: "ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ì°½ì—… ì‹œ í•„ìˆ˜ ì¸í—ˆê°€ ì ˆì°¨",
    category: "ì „ììƒê±°ë˜"
  },
  {
    id: 7,
    title: "ë²•ì¸ì„¤ë¦½ ë“±ê¸° ì‹¤ì „ ê°€ì´ë“œ",
    description: "ì£¼ì‹íšŒì‚¬ ì„¤ë¦½ë¶€í„° ì‚¬ì—…ìë“±ë¡ê¹Œì§€ ë‹¨ê³„ë³„ ì•ˆë‚´",
    category: "ë²•ì¸"
  },
  {
    id: 8,
    title: "í™˜ê²½ì˜¤ì—¼ë¬¼ì§ˆ ë°°ì¶œì‹œì„¤ ì‹ ê³ ë°©ë²•",
    description: "ì œì¡°ì—… ì‚¬ì—…ì¥ì˜ í™˜ê²½ ê´€ë ¨ ì¸í—ˆê°€ ì™„ë²½ ì •ë¦¬",
    category: "í™˜ê²½"
  },
  {
    id: 9,
    title: "ì£¼ë¥˜íŒë§¤ì—… ë©´í—ˆ ì·¨ë“ ê°€ì´ë“œ",
    description: "ì¼ë°˜ìŒì‹ì  ì£¼ë¥˜íŒë§¤ë¶€í„° ì£¼ë¥˜ë„ë§¤ê¹Œì§€",
    category: "ì£¼ë¥˜"
  },
  {
    id: 10,
    title: "í–‰ì •ì‹¬íŒ ì²­êµ¬ ì‹¤ë¬´ ê°€ì´ë“œ",
    description: "í–‰ì •ì²˜ë¶„ ë¶ˆë³µ ì‹œ í–‰ì •ì‹¬íŒ ì²­êµ¬ ë°©ë²•ê³¼ ì ˆì°¨",
    category: "í–‰ì •êµ¬ì œ"
  }
];

// ì˜¤í”ˆ ì¹´í†¡ ë§í¬ (ì‹¤ì œ ë§í¬ë¡œ êµì²´í•˜ì„¸ìš”)
const KAKAO_LINK = "https://open.kakao.com/o/your-openchat-link";

// API ì—”ë“œí¬ì¸íŠ¸

app.get('/api/topics', (req, res) => {
  const shuffled = [...topics].sort(() => 0.5 - Math.random());
  const recommended = shuffled.slice(0, 5);
  res.json({ success: true, topics: recommended });
});

app.post('/api/generate-content', (req, res) => {
  const { topic } = req.body;
  const content = generateBlogContent(topic);
  res.json({ success: true, content });
});

app.post('/api/generate-image-prompt', (req, res) => {
  const { topic } = req.body;
  const prompt = generateImagePrompt(topic);
  res.json({ success: true, prompt });
});

// ì˜¤í”ˆì¹´í†¡ CTA ë°°ë„ˆ (í…Œí—¤ë€ ìŠ¤íƒ€ì¼)
function createKakaoLink(text = "1:1 ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°") {
  return `

â–¼ ${text} â–¼

<div style="background: #FEE500; padding: 20px; border-radius: 10px; text-align: center; margin: 25px 0;">
  <a href="${KAKAO_LINK}" style="display: inline-block; background: #3C1E1E; color: #FEE500; padding: 12px 35px; border-radius: 25px; text-decoration: none; font-weight: bold; font-size: 16px;">
    ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ìƒë‹´í•˜ê¸° (ë¬´ë£Œ)
  </a>
</div>

`;
}

// í…Œí—¤ë€ ìŠ¤íƒ€ì¼ ì½˜í…ì¸  ìƒì„±
function generateBlogContent(topic) {
  
  const intro = `ì•ˆë…•í•˜ì„¸ìš”. ìŠ¹ì¸í–‰ì •ì‚¬ì‚¬ë¬´ì†Œì…ë‹ˆë‹¤.

[ì´ë¯¸ì§€1: ìŠ¹ì¸í–‰ì •ì‚¬ì‚¬ë¬´ì†Œ]

ì œê°€ ìµœê·¼ì— ì§ì ‘ ì²˜ë¦¬í•œ ${topic.category} ê´€ë ¨ ì‚¬ë¡€ë¥¼ ë“¤ë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

í•œë™ì•ˆ ê³„ì†í•´ì„œ ê³ ë¯¼í•˜ë˜ ${topic.description} ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì—¬ëŸ¬ ë¶„ë“¤ì´ ì €ë¥¼ ì°¾ì•„ì£¼ì…¨ê³ , ê·¸ ê³¼ì •ì—ì„œ ê²ªì€ ê²½í—˜ì„ ë‚˜ëˆ ë³´ë ¤ í•©ë‹ˆë‹¤.

`;

  let mainContent = '';
  
  switch(topic.category) {
    case "ê±´ì„¤ì—…":
      mainContent = `

> ê±´ì„¤ì—… ì¸í—ˆê°€, ì´ë ‡ê²Œ ì‹œì‘ë©ë‹ˆë‹¤

ê±´ì„¤ì—… ì¸í—ˆê°€ëŠ” ì–¸ì œë‚˜ ë³µì¡í•œ ê³¼ì •ì´ì—ˆì–´ìš”.

í•œí¸ìœ¼ë¡œëŠ” ìë³¸ê¸ˆê³¼ ê¸°ìˆ ì¸ë ¥ì„ ê°–ì¶”ë©´ì„œë„ ì„œë¥˜ë¥¼ ë¹ ì§ì—†ì´ ì¤€ë¹„í•˜ê¸°ë€ ì‰½ì§€ ì•Šì£ .

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì €í¬ ì‚¬ë¬´ì†Œë¥¼ ë°©ë¬¸í•˜ì‹œëŠ” ë¶„ë“¤ì´ ë§ìŠµë‹ˆë‹¤.

ë‹¤í–‰íˆ ì €í¬ëŠ” í‰ì¼ ì•¼ê°„ì—ë„ ìƒë‹´ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë‚®ì— ì¼ì´ ë§ìœ¼ì‹  ë¶„ë“¤ë„ í¸í•˜ê²Œ ìƒë‹´ë°›ìœ¼ì‹¤ ìˆ˜ ìˆì–´ìš”.

íŠ¹ë³„íˆ ì²« ìƒë‹´ì€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.

ëª…í™•í•˜ê³  ì²´ê³„ì ì¸ ì„¤ëª…ì„ í†µí•´ ê±´ì„¤ì—… ì¸í—ˆê°€ì˜ ì„¸ë¶€ì ì¸ ê³¼ì •ì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë¦¬ê³  ìˆì–´ìš”.

[ì´ë¯¸ì§€2: ìƒë‹´ ì§„í–‰ ëª¨ìŠµ]

ê·¸ë‚ , ìƒë‹´ì€ ë§¤ìš° ìœ ìµí–ˆë‹¤ê³  ë§ì€ ë¶„ë“¤ì´ ë§ì”€í•´ ì£¼ì‹­ë‹ˆë‹¤.

ì €ëŠ” ì—…ì¢… í™•ì¸ë¶€í„° ì‹œì‘í•´ì„œ, í•„ìš”í•œ ì„œë¥˜ ì¤€ë¹„, ìë³¸ê¸ˆ ìš”ê±´, ê¸°ìˆ ì¸ë ¥ í™•ë³´ ë°©ë²• ë“± ëª¨ë“  ê²ƒì„ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•´ ë“œë¦½ë‹ˆë‹¤.

ë¬´ì—‡ë³´ë‹¤ë„ ì˜ë¢°ì¸ë¶„ë“¤ì´ ì•ˆì‹¬í•  ìˆ˜ ìˆëŠ” ê±´, ì œê°€ ì´ì „ì—ë„ ì—¬ëŸ¬ ì°¨ë¡€ ì„±ê³µì ì¸ ë“±ë¡ì„ ì§„í–‰í•´ì™”ë‹¤ëŠ” ì‹¤ì ì´ ìˆê¸° ë•Œë¬¸ì´ì—ìš”.

ì‹¤ì§ˆì ì¸ ì‚¬ë¡€ì™€ ê·¸ê°„ì˜ ê²½í—˜ì„ í† ëŒ€ë¡œ í•œ ì¡°ì–¸ë“¤ì€ ë§¤ìš° ê°’ì§„ ê²ƒì´ì£ .

${createKakaoLink("ê±´ì„¤ì—… ì¸í—ˆê°€ ë¬´ë£Œ ìƒë‹´ë°›ê¸°")}

> ì–´ë–¤ ì„œë¥˜ê°€ í•„ìš”í•œê°€ìš”?

ìƒë‹´ í›„, ë³¸ê²©ì ì¸ ì„œë¥˜ ì¤€ë¹„ ì ˆì°¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤.

ì—¬ëŸ¬ ë³µì¡í•œ ì„œë¥˜ë“¤ì´ ì¡´ì¬í•˜ì§€ë§Œ, ì €ëŠ” ë§¤ìš° ì²´ê³„ì ìœ¼ë¡œ ì•ˆë‚´í•´ ë“œë¦¬ê³  ìˆì–´ìš”.

ì„œë¥˜ ì¤€ë¹„ëŠ” ì‹œê°„ê³¼ ë…¸ë ¥ì´ ë§ì´ ë“¤ì–´ê°€ëŠ” ì‘ì—…ì¸ë°, ì´ ê³¼ì •ì„ í†µí•´ ë“±ë¡ ê°€ëŠ¥ì„±ì„ ëª…í™•íˆ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í•„ìš”í•œ ì£¼ìš” ì„œë¥˜:**

ğŸ“Œ ë²•ì¸ë“±ê¸°ë¶€ë“±ë³¸ (ìµœê·¼ 3ê°œì›” ì´ë‚´)
ğŸ“Œ ê¸°ìˆ ì ê²½ë ¥ì¦ëª…ì„œ
ğŸ“Œ ìë³¸ê¸ˆ ì¦ëª…ì„œë¥˜
ğŸ“Œ ì‚¬ë¬´ì‹¤ ì„ëŒ€ì°¨ê³„ì•½ì„œ
ğŸ“Œ ê±´ë¬¼ë“±ê¸°ë¶€ë“±ë³¸

[ì´ë¯¸ì§€3: ì„œë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸]

ì €ëŠ” ê³ ê°ì˜ ì…ì¥ì—ì„œ ì¹œì ˆí•˜ê²Œ ì‘ëŒ€ë¥¼ í•´ë“œë¦¬ê³  ìˆê³ , ì—¬ëŸ¬ ê°€ì§€ ì§ˆë¬¸ì—ë„ ì„±ì‹¬ì„±ì˜ê» ë‹µë³€í•´ë“œë¦¬ê³  ìˆì–´ìš”.

í•˜ë£¨ì— ìˆ˜ì—†ì´ ë§ì€ ìƒë‹´ì„ í•´ì•¼ í•˜ëŠ” ê³ ëœ ì¼ì´ì§€ë§Œ, ì €ëŠ” í•­ìƒ ë¯¸ì†Œë¥¼ ìƒì§€ ì•Šê³  ì¹œì ˆí•˜ê²Œ ë‹µí•´ë“œë¦½ë‹ˆë‹¤.

ê·¸ ë•ë¶„ì— ì˜ë¢°ì¸ë¶„ë“¤ì˜ ë¶ˆì•ˆê³¼ ì˜êµ¬ì‹¬ì´ ë§ì´ í•´ì†Œëœë‹¤ê³  ë§ì”€í•´ ì£¼ì‹œë”ë¼ê³ ìš”.

ë˜í•œ, ì§„í–‰ ê³¼ì •ì„ ë°”ë¡œë°”ë¡œ ê³µìœ í•˜ë©° í”¼ë“œë°±ì„ ìš”ì²­í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ ì§„í–‰ ì†ë„ë¥¼ ì˜¬ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ìë³¸ê¸ˆê³¼ ê¸°ìˆ ì¸ë ¥ ìš”ê±´

ê±´ì„¤ì—…ë§ˆë‹¤ í•„ìš”í•œ ìë³¸ê¸ˆì´ ë‹¤ë¦…ë‹ˆë‹¤.

**ìë³¸ê¸ˆ ê¸°ì¤€:**

ğŸ“Œ í† ëª©ê±´ì¶•ê³µì‚¬ì—…: 7ì–µì›
ğŸ“Œ í† ëª©ê³µì‚¬ì—…: 5ì–µì›  
ğŸ“Œ ê±´ì¶•ê³µì‚¬ì—…: 5ì–µì›
ğŸ“Œ ì „ë¬¸ê±´ì„¤ì—…: 7ì²œë§Œì›~1ì–µ5ì²œë§Œì›

**ê¸°ìˆ ì¸ë ¥ ê¸°ì¤€:**

ğŸ“Œ ì¼ë°˜ê±´ì„¤ì—…: ê±´ì¶•ì‚¬, ê¸°ìˆ ì‚¬
ğŸ“Œ ì „ë¬¸ê±´ì„¤ì—…: ê¸°ëŠ¥ì‚¬ ì´ìƒ

[ì´ë¯¸ì§€4: ìë³¸ê¸ˆ ë° ê¸°ìˆ ì¸ë ¥ ìš”ê±´í‘œ]

ìë³¸ê¸ˆì€ ì‹ ì²­ì¼ ë‹¹ì¼ê¹Œì§€ ì‹¤ì œë¡œ ë³´ìœ í•˜ê³  ê³„ì…”ì•¼ í•©ë‹ˆë‹¤.

ì¼ì‹œì ìœ¼ë¡œ ë¹Œë¦° ëˆìœ¼ë¡œëŠ” ë“±ë¡ì´ ë¶ˆê°€ëŠ¥í•˜ë©°, ì´ëŠ” ì—„ê²©í•˜ê²Œ í™•ì¸ë˜ê³  ìˆì–´ìš”.

${createKakaoLink("ë‚´ ì—…ì¢…ì— í•„ìš”í•œ ìš”ê±´ í™•ì¸í•˜ê¸°")}

> ë“±ë¡ í›„ì—ë„ ê³„ì† ë„ì™€ë“œë¦½ë‹ˆë‹¤

ê±´ì„¤ì—… ë“±ë¡ì´ ì™„ë£Œëœ í›„ì—ë„, ì €ëŠ” ì§€ì†ì ìœ¼ë¡œ ì˜ë¢°ì¸ë¶„ë“¤ì„ ì§€ì›í•´ë“œë¦¬ê³  ìˆì–´ìš”.

ë³€ê²½ì‹ ê³ ë‚˜ ê¸°ìˆ ì êµì²´, ì¶”ê°€ ì—…ì¢… ë“±ë¡ ë“± í•„ìš”í•œ ëª¨ë“  ì‚¬í•­ë“¤ì„ ì±™ê²¨ë“œë¦¬ê³  ìˆì£ .

ë¬´ì—‡ë³´ë‹¤ ë³€í™”ë¬´ìŒí•œ ì œë„ ì†ì—ì„œ ìƒˆë¡œì´ ë“±ì¥í•˜ëŠ” ë¬¸ì œë“¤ì„ ì‹ ì†í•˜ê²Œ í•´ê²°í•´ë“œë¦¬ëŠ” ëŒ€ì‘ë ¥ì€ ë§ì€ ë¶„ë“¤ì´ ë§Œì¡±í•´ ì£¼ì‹œëŠ” ë¶€ë¶„ì´ì—ìš”.

ë“±ë¡ í›„ì—ë„ ë²•ë ¹ ë³€í™”ì™€ ì—¬ëŸ¬ ìƒí™©ë“¤ì„ ì˜ ëª¨ë‹ˆí„°ë§í•˜ë©´ì„œ, ì˜ë¢°ì¸ë¶„ë“¤ì´ ë†“ì¹  ìˆ˜ ìˆëŠ” ë¶€ë¶„ê¹Œì§€ ì„¸ì‹¬í•˜ê²Œ ì§€ì›í•´ ë“œë¦½ë‹ˆë‹¤.

ê·¸ ë•ë¶„ì— ë“±ë¡ ì´í›„ì—ë„ ì•ˆì •ì ìœ¼ë¡œ ì‚¬ì—…ì„ ìœ ì§€í•˜ì‹¤ ìˆ˜ ìˆê³ , ë³¸ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

[ì´ë¯¸ì§€5: ì‚¬í›„ê´€ë¦¬ ì„œë¹„ìŠ¤]

> ì²˜ë¦¬ ê¸°ê°„ê³¼ ë¹„ìš©

**ì²˜ë¦¬ ê¸°ê°„:** í‰ê·  2~3ì£¼

**ë¹„ìš©:**
ğŸ“Œ ì¼ë°˜ê±´ì„¤ì—…: 150~250ë§Œì›
ğŸ“Œ ì „ë¬¸ê±´ì„¤ì—…: 80~150ë§Œì›
â€» ê³µê³¼ê¸ˆ ë³„ë„

**í¬í•¨ ì‚¬í•­:**
âœ… ë¬´ë£Œ ì‚¬ì „ ìƒë‹´
âœ… ì„œë¥˜ ì‘ì„± ëŒ€í–‰
âœ… ê´€ì²­ ì œì¶œ ë° ëŒ€ì‘
âœ… ë“±ë¡ ì™„ë£Œê¹Œì§€ ì±…ì„ ê´€ë¦¬
âœ… ì‚¬í›„ ë³€ê²½ì‹ ê³  ì•ˆë‚´

${createKakaoLink("ì •í™•í•œ ê²¬ì  ë°›ì•„ë³´ê¸°")}
`;
      break;

    case "ì‹í’ˆìœ„ìƒ":
      mainContent = `

> ì‹í’ˆìœ„ìƒ ì˜ì—…ì‹ ê³ , ì‹œì‘ì´ ì¤‘ìš”í•©ë‹ˆë‹¤

ì‹í’ˆìœ„ìƒ ì˜ì—…ì‹ ê³ ëŠ” ìƒê°ë³´ë‹¤ ê¹Œë‹¤ë¡œìš´ ê³¼ì •ì…ë‹ˆë‹¤.

ì¸í…Œë¦¬ì–´ë§Œ ì˜ ëë‚´ë©´ ëœë‹¤ê³  ìƒê°í•˜ì‹œëŠ” ë¶„ë“¤ì´ ë§ì€ë°, ì‹œì„¤ ê¸°ì¤€ì„ ì¶©ì¡±í•˜ì§€ ëª»í•˜ë©´ ì‹ ê³ ê°€ ë°˜ë ¤ë©ë‹ˆë‹¤.

ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì €í¬ ì‚¬ë¬´ì†Œë¥¼ ì°¾ì•„ì£¼ì‹œëŠ” ì°½ì—…ìë¶„ë“¤ì´ ë§ì•„ìš”.

ì €ëŠ” ì¸í…Œë¦¬ì–´ ì‹œì‘ ì „ë¶€í„° ìƒë‹´ì„ ë°›ìœ¼ì‹œê¸¸ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.

ê·¸ë˜ì•¼ ë‚˜ì¤‘ì— ì¶”ê°€ ê³µì‚¬ ë¹„ìš©ì´ ë“¤ì§€ ì•Šê±°ë“ ìš”.

[ì´ë¯¸ì§€2: ìŒì‹ì  ì‹œì„¤ ê¸°ì¤€]

ì²« ìƒë‹´ì—ì„œëŠ” ì—…ì¢… í™•ì¸ê³¼ ì‹œì„¤ ê¸°ì¤€ì„ ìì„¸íˆ ì„¤ëª…í•´ ë“œë¦½ë‹ˆë‹¤.

ì¼ë°˜ìŒì‹ì ì¸ì§€ íœ´ê²ŒìŒì‹ì ì¸ì§€, ì œê³¼ì ì¸ì§€ì— ë”°ë¼ ìš”êµ¬ì‚¬í•­ì´ ì¡°ê¸ˆì”© ë‹¤ë¥´ê±°ë“ ìš”.

ì´ì „ì— ì„±ê³µì ìœ¼ë¡œ ì§„í–‰í–ˆë˜ ìˆ˜ë§ì€ ì‚¬ë¡€ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì§ˆì ì¸ ì¡°ì–¸ì„ ë“œë¦¬ê³  ìˆì–´ìš”.

${createKakaoLink("ì‹í’ˆìœ„ìƒ ì‹ ê³  ë¬´ë£Œ ìƒë‹´")}

> ì‹œì„¤ ê¸°ì¤€, ê¼­ í™•ì¸í•˜ì„¸ìš”

ìƒë‹´ í›„ì—ëŠ” ì‹œì„¤ ê¸°ì¤€ í™•ì¸ì´ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.

ì¸í…Œë¦¬ì–´ ì—…ì²´ì™€ ê³„ì•½í•˜ê¸° ì „ì— ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•  ì‚¬í•­ë“¤ì´ ìˆì–´ìš”.

**í•„ìˆ˜ ì‹œì„¤ ê¸°ì¤€:**

ğŸ“Œ ì¡°ë¦¬ì¥ê³¼ ê°ì„ ëª…í™•íˆ êµ¬ë¶„
ğŸ“Œ í™˜ê¸°ì‹œì„¤ ì„¤ì¹˜ í•„ìˆ˜
ğŸ“Œ ì‹ìì¬ ë³´ê´€ì‹œì„¤
ğŸ“Œ ê¸‰ìˆ˜ ë° ë°°ìˆ˜ì‹œì„¤
ğŸ“Œ í™”ì¥ì‹¤ (ì¼ì • ê·œëª¨ ì´ìƒ)

[ì´ë¯¸ì§€3: ì‹œì„¤ ê¸°ì¤€ ì²´í¬ë¦¬ìŠ¤íŠ¸]

ì €ëŠ” ì˜ë¢°ì¸ë¶„ë“¤ê»˜ ì¹œì ˆí•˜ê²Œ ê° ê¸°ì¤€ì„ ì„¤ëª…í•´ ë“œë¦¬ê³ , ì¸í…Œë¦¬ì–´ ë„ë©´ë„ í•¨ê»˜ ê²€í† í•´ ë“œë¦½ë‹ˆë‹¤.

í•˜ë£¨ì— ë§ì€ ìƒë‹´ì„ í•˜ì§€ë§Œ, í•œ ë¶„ í•œ ë¶„ ì •ì„±ê» ë‹µë³€í•´ ë“œë¦¬ë ¤ê³  ë…¸ë ¥í•˜ê³  ìˆì–´ìš”.

íŠ¹íˆ í™˜ê¸°ì‹œì„¤ê³¼ ê¸‰ìˆ˜ì‹œì„¤ì€ ë³´ê±´ì†Œì—ì„œ ê°€ì¥ ë§ì´ ì§€ì í•˜ëŠ” ë¶€ë¶„ì´ë¼ ê¼¼ê¼¼íˆ í™•ì¸í•´ ë“œë¦½ë‹ˆë‹¤.

> ìœ„ìƒêµìœ¡ë„ í•„ìˆ˜ì…ë‹ˆë‹¤

ë§ì€ ë¶„ë“¤ì´ ëª¨ë¥´ì‹œëŠ”ë°, ì˜ì—…ì‹ ê³  ì „ì— ìœ„ìƒêµìœ¡ì„ ê¼­ ì´ìˆ˜í•˜ì…”ì•¼ í•´ìš”.

**ìœ„ìƒêµìœ¡ ì•ˆë‚´:**

ğŸ“Œ êµìœ¡ê¸°ê´€: í•œêµ­ì‹í’ˆì‚°ì—…í˜‘íšŒ
ğŸ“Œ ë°©ë²•: ì˜¨ë¼ì¸ ìˆ˜ê°• ê°€ëŠ¥
ğŸ“Œ ì‹œê°„: ì•½ 2ì‹œê°„
ğŸ“Œ ë¹„ìš©: 2~3ë§Œì›

ì˜¨ë¼ì¸ìœ¼ë¡œ ì‹ ì²­í•˜ë©´ ë‹¹ì¼ ì´ìˆ˜ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ, ì¦ëª…ì„œ ë°œê¸‰ê¹Œì§€ëŠ” 1~2ì¼ ì •ë„ ê±¸ë¦½ë‹ˆë‹¤.

ì €ëŠ” ì˜ë¢°ì¸ë¶„ë“¤ê»˜ ë¯¸ë¦¬ ì•ˆë‚´ë¥¼ ë“œë ¤ì„œ ì¼ì •ì— ì°¨ì§ˆì´ ì—†ë„ë¡ ë„ì™€ë“œë¦¬ê³  ìˆì–´ìš”.

[ì´ë¯¸ì§€4: ìœ„ìƒêµìœ¡ ì´ìˆ˜ì¦]

${createKakaoLink("ì˜ì—…ì‹ ê³  ì ˆì°¨ ìì„¸íˆ ì•Œì•„ë³´ê¸°")}

> ì‹ ê³  í›„ì—ë„ ê³„ì† ë„ì™€ë“œë¦½ë‹ˆë‹¤

ì˜ì—…ì‹ ê³ ê°€ ì™„ë£Œëœ í›„ì—ë„ ì§€ì†ì ìœ¼ë¡œ ì§€ì›í•´ ë“œë¦½ë‹ˆë‹¤.

ë©”ë‰´ ë³€ê²½ì´ë‚˜ ì‹œì„¤ ë³€ê²½, ì˜ì—…ì ë³€ê²½ ë“± í•„ìš”í•œ ëª¨ë“  ë³€ê²½ì‹ ê³ ë¥¼ ì±™ê²¨ë“œë¦¬ê³  ìˆì–´ìš”.

ë¬´ì—‡ë³´ë‹¤ ë³´ê±´ì†Œ ì ê²€ì´ë‚˜ ìœ„ìƒ ê´€ë ¨ ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ì‹ ì†í•˜ê²Œ ëŒ€ì‘í•´ ë“œë¦¬ëŠ” ê²ƒì´ ì €ì˜ ê°•ì ì´ì—ìš”.

ê·¸ ë•ë¶„ì— ì˜ì—…ì‹ ê³  í›„ì—ë„ ì•ˆì‹¬í•˜ê³  ì¥ì‚¬ì—ë§Œ ì§‘ì¤‘í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[ì´ë¯¸ì§€5: ì‚¬í›„ê´€ë¦¬]

> ì²˜ë¦¬ ê¸°ê°„ê³¼ ë¹„ìš©

**ì²˜ë¦¬ ê¸°ê°„:** í‰ê·  1~2ì£¼

**ë¹„ìš©:**
ğŸ“Œ ì˜ì—…ì‹ ê³  ëŒ€í–‰: 30~50ë§Œì›
â€» ê³µê³¼ê¸ˆ ë° êµìœ¡ë¹„ ë³„ë„

**í¬í•¨ ì‚¬í•­:**
âœ… ì¸í…Œë¦¬ì–´ ì „ ë¬´ë£Œ ìƒë‹´
âœ… ì‹œì„¤ ê¸°ì¤€ ì‚¬ì „ ê²€í† 
âœ… ì„œë¥˜ ì‘ì„± ëŒ€í–‰
âœ… ë³´ê±´ì†Œ ì œì¶œ ë° í˜„ì¥ ëŒ€ì‘
âœ… ì‹ ê³  ì™„ë£Œê¹Œì§€ ì±…ì„ ê´€ë¦¬

${createKakaoLink("ì •í™•í•œ ë¹„ìš© í™•ì¸í•˜ê¸°")}
`;
      break;

    default:
      mainContent = `

> ${topic.title}ì„ ì‹œì‘í•˜ë©°

${topic.description}ì€ ë³µì¡í•œ ê³¼ì •ì…ë‹ˆë‹¤.

ì—¬ëŸ¬ ì„œë¥˜ì™€ ìš”ê±´ë“¤ì„ ì¤€ë¹„í•´ì•¼ í•˜ëŠ”ë°, í˜¼ìì„œ ì§„í–‰í•˜ê¸°ë€ ì‰½ì§€ ì•Šì£ .

ì´ëŸ° ê³ ë¯¼ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì €í¬ ì‚¬ë¬´ì†Œë¥¼ ì°¾ì•„ì£¼ì‹œëŠ” ë¶„ë“¤ì´ ë§ìŠµë‹ˆë‹¤.

[ì´ë¯¸ì§€2: ìƒë‹´ ì§„í–‰]

ìƒë‹´ì—ì„œëŠ” í•„ìš”í•œ ëª¨ë“  ê³¼ì •ì„ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•´ ë“œë¦½ë‹ˆë‹¤.

ì´ì „ì— ì„±ê³µì ìœ¼ë¡œ ì§„í–‰í–ˆë˜ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì§ˆì ì¸ ì¡°ì–¸ì„ ë“œë¦¬ê³  ìˆì–´ìš”.

${createKakaoLink("ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°")}

> í•„ìš”í•œ ì„œë¥˜ì™€ ìš”ê±´

**ì£¼ìš” ì„œë¥˜:**

ğŸ“Œ ì‹ ì²­ì„œ ë° ì²¨ë¶€ì„œë¥˜
ğŸ“Œ ì‚¬ì—…ì¥ ê´€ë ¨ ì¦ë¹™
ğŸ“Œ ìê²© ìš”ê±´ ì¦ëª…ì„œë¥˜

[ì´ë¯¸ì§€3: ì„œë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸]

ì €ëŠ” ì˜ë¢°ì¸ë¶„ë“¤ê»˜ ì¹œì ˆí•˜ê²Œ ê° ì„œë¥˜ë¥¼ ì„¤ëª…í•´ ë“œë¦¬ê³ , ì¤€ë¹„ ê³¼ì •ì—ì„œë„ ê³„ì† ë„ì™€ë“œë¦½ë‹ˆë‹¤.

> ì²˜ë¦¬ ê¸°ê°„ê³¼ ë¹„ìš©

**ì²˜ë¦¬ ê¸°ê°„:** í‰ê·  2~4ì£¼

**ë¹„ìš©:** 50~150ë§Œì›
â€» ì—…ë¬´ ë‚œì´ë„ì— ë”°ë¼ ìƒì´

**í¬í•¨ ì‚¬í•­:**
âœ… ë¬´ë£Œ ì‚¬ì „ ìƒë‹´
âœ… ì„œë¥˜ ì‘ì„± ëŒ€í–‰
âœ… ê´€ì²­ ì œì¶œ ë° ëŒ€ì‘
âœ… ì™„ë£Œê¹Œì§€ ì±…ì„ ê´€ë¦¬

[ì´ë¯¸ì§€4: ì²˜ë¦¬ ì ˆì°¨]

${createKakaoLink("ìƒë‹´ ì‹ ì²­í•˜ê¸°")}
`;
  }

  const conclusion = `

> ìŠ¹ì¸í–‰ì •ì‚¬ì‚¬ë¬´ì†Œì™€ì˜ ê²½í—˜

ì €í¬ì™€ í•¨ê»˜í•˜ì‹  ë¶„ë“¤ì˜ ê²½í—˜ì€ ë§¤ìš° ë§Œì¡±ìŠ¤ëŸ¬ì› ë‹¤ê³  ë§ì”€í•´ ì£¼ì‹­ë‹ˆë‹¤.

ì €í¬ê°€ ì „ë¬¸ì ì´ê³  ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•˜ê³ , ì§€ì†ì ì¸ ì‚¬í›„ ê´€ë¦¬ë¥¼ í•´ë“œë¦¬ê¸° ë•Œë¬¸ì— í° ì–´ë ¤ì›€ ì—†ì´ ì„±ê³µì ì¸ ê²°ê³¼ë¥¼ ì–»ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œëŠ” ë§ˆìŒ ë†“ê³  ë³¸ì—…ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ë˜ì–´ ì •ë§ ê¸°ì˜ë‹¤ê³ ë“¤ í•˜ì„¸ìš”.

ë‹¤ìŒì— ë‹¤ë¥¸ ì¸í—ˆê°€ê°€ í•„ìš”í•  ë•Œë„ ë§ì„¤ì„ ì—†ì´ ë‹¤ì‹œ ì €í¬ë¥¼ ì°¾ì•„ì£¼ì‹œëŠ” ë¶„ë“¤ì´ ë§ìŠµë‹ˆë‹¤.

[ì´ë¯¸ì§€6: ê³ ê° ë§Œì¡±]

${createKakaoLink("ì§€ê¸ˆ ë°”ë¡œ ìƒë‹´ ì‹ ì²­í•˜ê¸°")}

> ìŠ¹ì¸í–‰ì •ì‚¬ì‚¬ë¬´ì†Œ

ğŸ“Œ ì˜ë¢°ì¸ì˜ ì‹œê°„ê³¼ ë¹„ìš©ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤
ğŸ“Œ í–‰ì •ì‚¬ê°€ ì§ì ‘ 1:1 ìƒë‹´ ì§„í–‰
ğŸ“Œ 10ë…„ ì´ìƒ ê²½ë ¥ì˜ ë² í…Œë‘ í–‰ì •ì‚¬
ğŸ“Œ ${topic.category} ë¶„ì•¼ ì „ë¬¸

ì €í¬ì™€ì˜ ìƒë‹´ì´ í•„ìš”í•˜ì‹œë‹¤ë©´ ìƒë‹¨ ìƒë‹´ë§í¬ë¥¼ í†µí•˜ì—¬ ë¬¸ì˜ ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

1ì°¨ ìƒë‹´ ì‹œ ë³„ë„ì˜ ë¹„ìš© ì—†ì´ ì €í¬ê°€ ì§ì ‘ ìƒë‹´ì„ ì§„í–‰í•˜ë©°, ëª¨ë“  ìƒë‹´ì€ ì ˆëŒ€ ë¹„ë°€ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì–¸ì œë‚˜ í¸í•˜ê²Œ ë¬¸ì˜ ì£¼ì‹œê¸°ë¥¼ ë°”ë¼ë©° ê¸€ì„ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì˜ ì¸í—ˆê°€ íŒŒíŠ¸ë„ˆ, ìŠ¹ì¸í–‰ì •ì‚¬ì‚¬ë¬´ì†Œì˜€ìŠµë‹ˆë‹¤.

${createKakaoLink("ğŸ“ 1:1 í–‰ì •ì‚¬ ìƒë‹´ ì‹ ì²­í•˜ê¸°")}
`;

  return intro + mainContent + conclusion;
}

function generateImagePrompt(topic) {
  // 8ê°€ì§€ ì „ë¬¸ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ ì„¸íŠ¸
  const imageSet = {
    // ê³µí†µ ê¸°ë³¸ ì´ë¯¸ì§€ (ëª¨ë“  ì£¼ì œì— í™œìš© ê°€ëŠ¥)
    common: {
      main: "A modern and neat administrative professional's office interior, warm sunlight streaming through a large window, a clean wooden desk with a laptop and some files, a bookshelf in the background, trustworthy and inviting atmosphere, photorealistic, 8k resolution.",
      consulting: "Two people in a professional consultation meeting across a desk, focusing on active listening, hands gently gesturing, blurred office background, warm and empathetic lighting, business casual attire, cinematic shot.",
      success: "A close-up of a firm handshake between two professionals over signed official documents on a desk, symbolizing agreement and successful results, bright and positive tone, high detail.",
      process: "A professional's hands typing on a laptop keyboard with analytical documents spread on the desk, spectacles resting nearby, focused on detailed administrative work, efficient and smart working concept.",
      profile: "A portrait of a confident professional (mid-shot, slightly blurred face for privacy), standing in a neat office, arms crossed confidently or holding a file folder, warm smile, conveying reliability and expertise, high-quality portrait."
    },
    
    // ì£¼ì œë³„ íŠ¹í™” ì´ë¯¸ì§€
    specialized: {
      "ê±´ì„¤ì—…": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      "ì‹í’ˆìœ„ìƒ": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      "ê±´ì¶•": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      "í™˜ê²½": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      "ì£¼ë¥˜": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      "ì „ììƒê±°ë˜": "Close-up shot of official government application forms, architectural blueprints, and a red approval stamp on a desk, representing licensing and permits, meticulous and official vibe, macro photography.",
      
      "ì¶œì…êµ­": "Various international passports stacked next to visa application documents on a desk, a small globe or map in the blurred background, bright lighting representing global mobility, sharp focus on documents.",
      
      "ë²•ì¸": "Modern corporate boardroom setting with a view of a city skyline, a tablet displaying business growth charts and incorporation documents on the table, sophisticated and professional business atmosphere.",
      "ë²•ë¥ ": "Modern corporate boardroom setting with a view of a city skyline, a tablet displaying business growth charts and incorporation documents on the table, sophisticated and professional business atmosphere.",
      "í–‰ì •êµ¬ì œ": "Modern corporate boardroom setting with a view of a city skyline, a tablet displaying business growth charts and incorporation documents on the table, sophisticated and professional business atmosphere."
    }
  };
  
  // ê° ì´ë¯¸ì§€ ë²ˆí˜¸ì— ë”°ë¥¸ í”„ë¡¬í”„íŠ¸ ë§¤í•‘
  const imagePrompts = {
    1: imageSet.common.main,           // ì´ë¯¸ì§€1: ì‚¬ë¬´ì‹¤ ì „ê²½
    2: imageSet.common.consulting,     // ì´ë¯¸ì§€2: ìƒë‹´ ëª¨ìŠµ
    3: imageSet.specialized[topic.category] || imageSet.common.process, // ì´ë¯¸ì§€3: ì£¼ì œë³„ íŠ¹í™”
    4: imageSet.common.process,        // ì´ë¯¸ì§€4: ì—…ë¬´ í”„ë¡œì„¸ìŠ¤
    5: imageSet.common.success,        // ì´ë¯¸ì§€5: ì„±ê³µ/ì•…ìˆ˜
    6: imageSet.common.profile         // ì´ë¯¸ì§€6: í”„ë¡œí•„
  };
  
  return {
    all: imagePrompts,
    main: imagePrompts[1],
    description: `ì´ 6ì¥ì˜ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸:
    
1. ë©”ì¸/ë„ì… - ì „ë¬¸ì ì¸ ì‚¬ë¬´ì‹¤ ë¶„ìœ„ê¸°
2. ìƒë‹´ ì¥ë©´ - ê³ ê°ê³¼ì˜ ë”°ëœ»í•œ ìƒë‹´
3. ì£¼ì œë³„ íŠ¹í™” - ${topic.category} ê´€ë ¨ ì„œë¥˜/ì—…ë¬´
4. ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ - ê¼¼ê¼¼í•œ ì„œë¥˜ ì‘ì—…
5. ì„±ê³µ/ê²°ê³¼ - ì‹ ë¢°ì˜ ì•…ìˆ˜
6. í”„ë¡œí•„ - ì „ë¬¸ê°€ì˜ ëª¨ìŠµ`
  };
}

app.listen(PORT, '0.0.0.0', () => {
  console.log(`âœ¨ ìŠ¹ì¸í–‰ì •ì‚¬ ë¸”ë¡œê·¸ ë„ìš°ë¯¸ ì„œë²„ ì‹¤í–‰ ì¤‘`);
  console.log(`ğŸŒ http://localhost:${PORT}`);
  console.log(`ğŸ“ í…Œí—¤ë€ ìŠ¤íƒ€ì¼ ì™„ë²½ ì ìš©!`);
});
